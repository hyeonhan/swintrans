experiment:
  name: baselines_4modes
  seed: 42

run:
  mode: rgb_resnet  # one of ["rgb_resnet","rgb_swin","rgbswin_dctswin","rgbresnet_dctswin"]

data:
  root: ./data
  img_size: 224
  num_workers: 8
  batch_size: 32
  dct_block: 8
  use_gray_for_dct: true

model:
  rgb_backbone: resnet50  # or "swin_tiny_patch4_window7_224"
  dct_backbone: swin_tiny_patch4_window7_224
  fusion_head_dim: 512  # MLP hidden for late fusion
  num_classes: 2
  pretrained: true
  freeze_stages_for_dct: 0  # e.g., 2 to freeze early stages initially

train:
  grad_accum_steps: 1
  warmup_epochs: 5

dct:
  c1_init: 2.0
  c2_init: 4.0
  k: 50.0

optim:
  lr: 3e-4
  weight_decay: 0.05
  betas: [0.9, 0.999]
  epochs: 30
  label_smoothing: 0.05
  loss: ce  # ce or focal
  focal_gamma: 2.0
  focal_alpha: 0.25

logging:
  log_interval: 10
  tensorboard: true
  save_best_metric: acc1  # acc1 or f1_macro

augment:
  fog:
    enabled: true  # master switch
    duplicate: true  # doubles dataset by adding fogged copies
    apply_to: "both"  # "rgb_only" | "both"
    beta_range: [0.03, 0.10]  # attenuation Î² ~ thicker fog when higher
    airlight_scalar_range: [0.9, 1.0]  # sampled if not using RGB tuple
    use_rgb_airlight: false  # if true, sample per-channel airlight
    airlight_rgb_low: [0.90, 0.92, 0.94]
    airlight_rgb_high: [0.98, 0.99, 1.00]
    depth_mode_probs: {contrast: 0.6, gradient: 0.3, flat: 0.1}
    grad_angle_range: [0, 180]
    contrast_radius_range: [7, 15]
    contrast_gain_range: [0.8, 1.6]
    bloom_strength_range: [0.0, 0.3]
    bloom_th: 0.75
    bloom_radius: 9
    seed: 1337
    debug_dump_first_n: 0  # >0 to save side-by-side samples for sanity check

